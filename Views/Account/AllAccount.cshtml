@model IEnumerable<IllinoisProject.Models.Account>

    <p>
        <a asp-controller="Account" asp-action="Register"> Add an account</a>
    </p>
<input type="text" id="searchInput" onkeyup="searchFunction()" placeholder="Search for users">
<br />

    <h3> All Account list</h3>
@{
    if(Model.Count() < 1)
    {
        <p>No accounts yet.</p>
    }
    else
    {
        <table border="1">
            <thead>
            <tr>
                <th> Account ID</th>
                <th> Account Name</th>
                <th> Username</th>
                <th> Blog Posts</th>
                <th> Edit</th>
                <th> Delete</th>
            </tr>
            </thead>
            @{

                foreach(var account in Model)
                {
                    <tbody id="dataBody">
                    <tr>
                        <td>@account.AccountId</td>
                        <td>@account.AccountName</td>
                        <td>@account.UserName</td>
                        <td>@account.BlogPosts</td>
                        
                        <td><a asp-action="EditAccount" asp-route-id="@User.Identity.Name">Edit</a></td>
                        <td><a asp-action="DeleteAccount" asp-route-id="@User.Identity.Name">Delete</a></td>
                    </tr>
                    </tbody>
                }
            }
        </table>
        <script>
            function searchFunction() {
                var input, filter, rows, i, txtValue;
                input = document.getElementById("searchInput");
                filter = input.value.trim().toUpperCase();
                rows = document.querySelectorAll("#dataBody tr");

                for (i = 0; i < rows.length; i++) {
                    var row = rows[i];
                    var cells = row.getElementsByTagName("td");
                    var rowMatch = false;

                    for (var j = 0; j < cells.length; j++) {
                        txtValue = cells[j].textContent || cells[j].innerText;

                        if (txtValue.trim().toUpperCase().indexOf(filter) > -1) {
                            rowMatch = true;
                            break; // If any cell in the row matches, display the entire row
                        }
                    }

                    if (rowMatch) {
                        row.style.display = "";
                    } else {
                        row.style.display = "none";
                    }
                }
            }
        </script>
    }
}